{
"$whitespace": ["\t", "\n", "\r", " "],
"$newline": ["\n", "\r"],
"$0-9": ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
"$1-9": ["1", "2", "3", "4", "5", "6", "7", "8", "9"],
"$hex_digit": ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9",
                  "a", "b", "c", "d", "e", "f",
                  "A", "B", "C", "D", "E", "F"],
"$exponent": ["e", "E"],
"$exponent_prefix": ["+", "-"],
"$single_char_escapes": ["\"", "\\", "/", "b", "f", "n", "r", "t"],
"$high_surrogate_2": ["8", "9", "a", "b", "A", "B"],
"$low_surrogate_2": ["c", "d", "e", "f", "C", "D", "E", "F"],


"whitespace": {
        "$whitespace": "whitespace",
        "/": [{"ifconfig": "comments"}, "comment_leader", "whitespace" ],
        "???": {"popstate": ""}
},

"comment_leader": {
        "*": "block_comment",
        "/": "line_comment",
        "...": "whitespace"
},

"block_comment": {
        "*": "uncomment_leader",
        "...": "block_comment"
},

"uncomment_leader": {
        "/": "whitespace",
        "...": "block_comment"
},

"line_comment": {
        "$newline": "whitespace",
        "...": "line_comment"
},

"value": {
        "???":  [{"pushstate": "w_value"}, "whitespace"]
},

"w_value": {
        "n": [{"push": "null"}, "null_2"],
        "t": [{"push": "true"}, "true_2"],
        "f": [{"push": "false"}, "false_2"],
        "-": [{"push": "number"}, "minus"],
        "0": [{"push": "number"}, "zero_number"],
        "$1-9": [{"push": "number"}, "number"],
        "\"": [{"push": "string"}, {"push": "double_quote"}, "string" ],
        "'": [{"ifconfig": "single_quotes"}, "single_quote_string"],
        "{": [ {"push": "object"}, "key" ],
        "[": [ {"push": "array"}, "value" ],
        "???": [{"ifconfig": "unquoted_strings"}, "no_quote_string"]
},

"no_quote_string": {
        "???": [{"push": "string"}, "string"] 
},

"single_quote_string": {
        "???": [{"push": "string"}, {"push": "single_quote"}, "string"]
},

"key": {
        "???":  [{"pushstate": "w_key"}, "whitespace"]
},

"w_key": {
        "\"": [{"push": "key"}, {"push": "double_quote"}, "string" ],
        "'": [{"ifconfig": "single_quotes"}, "single_quote_key"],
        "???": [{"ifconfig": "unquoted_keys"}, "no_quote_key"]
},

"no_quote_key": {
        "???": [{"push": "key"}, "string"]
},

"single_quote_key": {
        "???": [{"push": "key"}, {"push": "single_quote"}, "string"]
},

"after_key": {
        "???":  [{"pushstate": "w_after_key"}, "whitespace"]
},

"w_after_key": {
        ":": "value"
},

"after_value": {
        "???": [{"pushstate": "w_after_value"}, "whitespace"]
},

"w_after_value": {
        ",": [{"ifconfig": "trailing_commas"}, "value_or_close", "after_separator"],
        "}": [{"ifpop": "object"}, "after_value"],
        "]": [{"ifpop": "array"}, "after_value"],
        "???": [{"ifconfig": "optional_commas"}, "after_separator"]
},




"value_or_close": {
        "}": [{"ifpop": "object"}, "after_value"],
        "]": [{"ifpop": "array"}, "after_value"],
        "???": "after_separator"
},

"after_separator": {
        "???": [{"ifpeek": "object"}, "key", "value"]
},





"null_2": { "u": "null_3" },
"null_3": { "l": "null_4" },
"null_4": { "l": [{"pop": "null"}, "after_value"] },

"true_2": { "r": "true_3" },
"true_3": { "u": "true_4" },
"true_4": { "e": [{"pop": "true"}, "after_value"] },

"false_2": { "a": "false_3" },
"false_3": { "l": "false_4" },
"false_4": { "s": "false_5" },
"false_5": { "e": [{"pop": "false"}, "after_value"] },


"after_number": {
        "???": [{"pop": "number"}, "after_value"]
},

"minus": {
        "0": "zero_number",
        "$1-9": "number"
},

"zero_number": {
        ".": "fraction",
        "$exponent": "exponent_prefix",
        "???": "after_number"
},

"number": {
        "$0-9": "number",
        ".": "fraction",
        "$exponent": "exponent_prefix",
        "???": "after_number"
},

"fraction": {
        "$0-9": "fraction",
        "$exponent": "exponent_prefix",
        "???": "after_number"
},

"exponent_prefix": {
        "$exponent_prefix": "exponent+",
        "$0-9": "exponent"
},

"exponent+": {
        "$0-9": "exponent"
},

"exponent": {
        "$0-9": "exponent",
        "???": "after_number"
},




"string": {
        "\\": [{"ifconfig": "escape_characters"}, "start_escape_chars", "start_escape"],
        "\"": [{"ifpop": "double_quote"}, 
                        [
                                [{"ifpop": "key"}, "after_key"],
                                [{"ifpop": "string"}, "after_value"]
                        ]
               ],
        "'": [{"ifconfig": "single_quotes"}, "end_single_quote", "string"],
        " ": [{"ifconfig": ["unquoted_strings", "unquoted_keys"]}, "end_no_quote", "string"],
        "0x21-0x7F": "string",
        "0xC2-0xDF": "continuation_1",
        "0xE0": "check_e0",
        "0xE1-0xEC": "continuation_2",
        "0xED": "check_ed",
        "0xEE-0xEF": "continuation_2",
        "0xF0": "check_f0",
        "0xF1-0xF3": "continuation_3",
        "0xF4": "check_f4"
},

"end_no_quote": {
        "???": [
                [{"ifpop": "key"}, "after_key"],
                [{"ifpop": "string"}, "after_value"]
        ]
},

"end_single_quote": {
        "???": [{"ifpop": "single_quote"}, 
                        [
                         [{"ifpop": "key"}, "after_key"], 
                         [{"ifpop": "string"}, "after_value"]
                        ]
        ]
},

"start_escape": {
        "???": [{"push": "escape"}, "escape"]
},

"start_escape_chars": {
        "???": [{"ifnpeek": "double_quote"},
                        [{"ifnpeek": "single_quote"},
                                [{"push": "escape_chars"}, "escape_chars"]
                        ]
                ]
},

"check_e0": {
        "0xA0-0xBF": "continuation_1"
},

"check_ed": {
        "0x80-0x9F": "continuation_1"
},

"check_f0": {
        "0x90-0xBF": "continuation_2"
},

"check_f4": {
        "0x80-0x8F": "continuation_2"
},

"continuation_1": { 
        "0x80-0xBF": "string" 
},

"continuation_2": { 
        "0x80-0xBF": "continuation_1" 
},

"continuation_3": { 
        "0x80-0xBF": "continuation_2" 
},

"escape": {
        "$single_char_escapes": [{"pop": "escape"}, "string"],
        "'": [{"ifconfig": "single_quotes"}, "end_escape"],
        "u": [{"swap": "escape_u"}, "hex_1"]
},

"end_escape": {
        "???": [{"pop": "escape"}, "string"]
},

"escape_chars": {
        "...": [{"pop": "escape_chars"}, "string"]
},

"hex_1": {
        "D": [ {"ifpeek": "surrogate" }, "low_surrogate_2", "high_surrogate_2" ],
        "$hex_digit": [{"ifnpeek": "surrogate"}, "hex_2"]
},

"high_surrogate_2": {
        "$high_surrogate_2": [ {"push": "surrogate"}, "hex_3" ],
        "$hex_digit": "hex_3"
},

"low_surrogate_2": {
        "$low_surrogate_2": [ {"pop": "surrogate"}, "hex_3" ]
},

"hex_2": { 
        "$hex_digit": "hex_3"
},

"hex_3": { 
        "$hex_digit": "hex_4"
},

"hex_4": { 
        "$hex_digit": [ 
                [{"ifpeek": "surrogate"}, "low_surrogate"],
                [{"pop": "escape_u"}, "string"]
        ]
},

"low_surrogate": {
        "\\": "low_surrogate_u"
},

"low_surrogate_u": {
        "u": "hex_1"
}

}




